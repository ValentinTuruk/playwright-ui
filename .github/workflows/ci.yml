name: CI
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: [20.x]
      - name: Install
        run: npm install
      - name: Test
        env:
          BASE_URL: ${{ secrets.BASE_URL }}
          QASE_API_TOKEN: ${{ secrets.QASE_API_TOKEN }}
          QASE_PROJECT_CODE: ${{ secrets.QASE_PROJECT_CODE }}
        run: QASE_REPORT=1 npm run regression
      - uses: actions/upload-artifact@v1
        if: failure()
        with:
          name: logs
          path: logs
